<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>xlreg_r</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <link rel="stylesheet" type="text/css" href="css/normalize.css" />
  <link rel="stylesheet" type="text/css" href="css/ghp.css" />
</head>
<body>
<div class="content">
<h1>xlreg_r</h1>

<p>A Ruby client for the xlReg cluster registry.  <strong>xlreg_r</strong>
makes it easy to create new small clusters some or all of whose members are
written in Ruby.  xlreg_r is expected to be used primarily
for testing, where
the ability to create and launch new, unique, distinct clusters in seconds
will be a major advantage.</p>

<p>In such a cluster, members use the <strong>xlReg</strong> public server to register and
exchange member IP addresses.  When a member finishes booting, it has
learned the IP addresses of its peers and the RSA keys used to encrypt
traffic between members and traffic between cluster members and clients.</p>

<h2>The xlReg Service</h2>

<p><img src="img/xl-registration.jpg" alt="xl-registration" style="float:left" title="members registering with xlReg"></p>

<p><a href="http://jddixon.github.io/xlReg_go">xlReg</a>
is a service which provides its clients with unique nodeIDs and allows them
to register and join new clusters and collect configuration information
about existing clusters.</p>

<p>An <strong>xlReg cluster</strong> is a number of machines
which cooperate as a set of intercommunicating servers.  Each
such server has two RSA keys.  One, the <strong>sig</strong> key, is used for creating
digital signatures.  The other, the <strong>comms</strong> key, is used for encrypting
communications; most often the comms key is used for creating keys for
block ciphers. That is, the comms key is used only for agreeing on the
much faster block cipher key used during the rest of the communications
session.</p>

<p>Each xlReg cluster member has at least one IP address used for
intra-cluster communications, for communications between members.  In some
clusters each member will also have a second IP address used for
communications with cluster clients.</p>

<p>The xlReg server itself, its clients, and so the cluster members all are
or behave like
<a href="http://jddixon.github.io/xlNode_go">XLattice nodes</a>.
That is, they are self-contained fault-tolerant entities with some
persistent store.  These nodes may be located anywhere on the global
Internet, or on private networks with access to the network in which
an xlReg server resides.`</p>

<p>Like any XLattice node, the xlReg client can either be configured with some
specific keys at start-up or it will generate a new pair of  keys and save
them to persistent store.</p>

<h2>Registration</h2>

<p><img src="img/simple-cluster.jpg" alt="simple-cluster" style="float:right" title="small cluster, no clients"></p>

<p>A booting xlReg client establishes an encrypted connection to the xlReg server.
If this is its first conversation with the xlReg server, the client then
provides the server with configuration information including its RSA public
keys.  (The client does <strong>not</strong> register its secret RSA <strong>private</strong> keys.)
The configuration information is signed with the applicant&rsquo;s private
*sig&rdquo; key.  The server uses the
client&rsquo;s RSA public key, provided as part of the configuration information, to
verify the client&rsquo;s digital signature on the configuration data.  This proves
that the configuration information is intact and that the applicant has the
private key corresponding to the public key.  In other words, the server has
in a certain sense confirmed the applicant&rsquo;s identity.  Having done this,
the xlReg server issues the client with a unique node ID, a 20-byte value,
completing client registration.</p>

<p>Once an xlReg registry client has identified itself to the registry it can</p>

<ol>
<li>register new clusters or</li>
<li>join existing clusters or</li>
<li>get information on existing clusters.</li>
</ol>

<p>The third option is used, for example, by nodes intending to become clients
of an existing cluster.</p>

<h2>Acquiring Configuration Data</h2>

<p>After a new member has joined a cluster the server provides it
with cluster configuration data.  This includes</p>

<ul>
<li>the cluster name,</li>
<li>the cluster ID, and</li>
<li>the cluster size, the  maximum number of cluster members</li>
</ul>

<p>It also includes for each current cluster member the member&rsquo;s</p>

<ul>
<li>nodeID,</li>
<li>IP address(es),</li>
<li><strong>sig</strong> RSA public key, and</li>
<li><strong>comms</strong> RSA public key</li>
</ul>

<p><img src="img/cluster-with-clients.jpg" alt="cluster-with-clients" style="float:left" title="cluster with clients"></p>

<p>The new cluster member can then use this information to communicate with
other members.  Cluster members need no further assistance from the
xlReg server.</p>

<p>Cluster members will communicate with one another and clients
using protocols agreed-upon among themselves, but the xlReg registry
has no knowledge of such protocols.</p>

<p><strong>xlreg_r</strong> is currently in development.  This is not
necessarily a description of running code; it is where we are going.</p>

<p>xlReg is an <a href="http://jddixon.github.io/xlattice_go/">XLattice</a> project.  More
detailed (but somewhat dated) conceptual information on XLattice
is available at the <a href="http://www.xlattice.org">2003-2006 Java XLattice website</a>.</p>

<p>xlReg servers and clients communicate using the
<a href="http://code.google.com/p/protobuf/">Gooble Protocol Buffers</a>-based
<a href="http://jddixon.github.io/xlReg_go/xlReg_protocol.html">xlReg protocol</a>.
An xlReg server has been in test for several months.</p>

<h2>Public Development Server</h2>

<p>There is currently an xlReg server running on xlreg.xlattice.org:56789,
with the public keys shown in the registry credentials below.</p>

<pre><code>regCred {
    Name: xlReg
    ID: 1866a39a9f4014e3653f7979de321331273c1dd7
    CommsPubKey: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHXC3fdgYLVJZdyTHRyA5/9y/Zm6TI0nAnREq/9X+QQsOkpFukNclWPf0fcKv9MMzvJ70t88BmyiVjtrr1/ctTVlAddLJzt2VXF3ELZ3tSHjaYYZyhPml0X/erN43DuM2eU2dPHNkg70HjpY4Q52P4s6vNljJT30on9/Bd9HN7E0kdrI2wfivGH2gnxxfT1bty34GI/j/4vzLWKGg60HOnm5mmYNY6tJwExF4PpP0ia7dQYCCJlBdNt5E22nAdUr706yM6zaz11v5D38mZPz3lIl6oZROyM57AuegPSjU43dAETo77rwr1Cj6pSLPpQ8pANRMtrJ7RB/QVSn8EC6PJ

    SigPubKey: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC3VTfWotp/Cmkqo8+98iX8PLW7tW2FxkavqPURmhXxgvmY9Vf35ysE7co0uFI1MoPjdGoklf7HRxWjACzIllykTIirmpakFHGGia5biOKefK9lxKI7iP3Ju2wzAD062NeqHALX17jTyTo4Q2p5RMgTlydU6r51yAJGMlnR+82OhrhK3UUynP+DXd2cuc1LgKpEoPln6ayJQINiEiiulZ0RUpqEMY1EybgVd2xixuGXfkLQo3zKLwHi8A1O3YU/Rjxj/bOCtB96+JIe6babti/gKILeL0WwHBUa2f/8dWjq31f3WZ1sTF3HM00uYK9fzBDfspk8zNs7BW0PlDqkMDv/

    EndPoints {
         TcpEndPoint: 54.186.197.123:56789
    }
    Version: 1.6
}
</code></pre>

<p>The IP address in the reg credentials above is of course that of xlreg.xlattice.org.</p>

<h2>Server Implementation</h2>

<p>The xlReg server and its supporting libraries are written in
<a href="http://golang.org">the Go programming language</a>, a high-performance
systems programming language incorporating certain features of
<a href="http://en.wikipedia.org/wiki/Tony_Hoare">Tony Hoare</a>&rsquo;s
revolutionary <strong>CSP</strong>,
<a href="http://www.usingcsp.com">Communicating Sequential Processes</a>.</p>

<p>Google&rsquo;s Go language is a stable product.  It has been available for
several years and the compiler is widely acknowledged to be very fast
and to generate fast, compact code.  The Go language itself &ndash;
the compiler and its libraries &ndash; is free and open source.</p>

<h2>Server Source Code</h2>

<p>Software developers can currently obtain the xlReg server source code at
<a href="https://github.com/jddixon/xlReg_go/">xlReg_go&rsquo;s Github project page</a>
so that if you are impatient to begin using xlReg you can build and operate
your own server.</p>

<h2>Client Source Code</h2>

<p>This is best obtained through
<a href="https://github.com/jddixon/xlreg_r/">this client&rsquo;s Github project page</a>.</p>

<h2>Project Status</h2>

<p>The xlReg server is currently a good beta: it is reasonably reliable and
there are no known serious bugs.</p>

<p><strong>This client is itself pre-alpha:</strong> some minimal code exists, but nothing
beyond reading the registry credentials (<code>regCred.dat</code>) and going through
the initial hello/reply session with the server, xlReg.</p>
  <div class="f">
    <hr />
    <div class="license">
      <p><a href="LICENSE.html">LICENSE</a></p>
    </div>
    <div class="project">
      github <a href="https://github.com/jddixon/xlreg_r">      <img src="img/GitHub-Mark-32px.png" 
        alt="link to project"  
        style="display: inline-block; margin-left: 0 auto; margin-right: 0 auto">
       </a> project
    </div>
    <div class="logo" >
      <a href="http://www.xlattice.org">
      <img src="img/xlattice-2014.jpg" alt="the XLattice Project" style="float: right;" >
      </a>
    </div>
  </div>
</div>
</body>
</html>
